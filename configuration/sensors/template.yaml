- platform: template
  sensors:
    battery_status:
      friendly_name: "Battery Status"
      entity_id:
      - input_boolean.battery_status_update
      value_template: >
        {%- set threshold = 20 -%}
        {%- set domains = ['light', 'switch', 'sensor', 'zwave', 'lock'] -%}
        {%- for domain in domains -%}
        {%- for item in states[domain] if ((item.attributes.battery_level is defined and item.attributes['battery_level'] | int < threshold) or ("battery" in item.name | lower and ((item.state | int < threshold and item.state|int != 0) or item.state | lower == "low" or item.state | lower == "unknown"))) -%}
        {%- if (item.attributes.battery_level is defined and item.attributes['battery_level'] | int < threshold) -%}
        {{ item.name }} ({{ item.attributes['battery_level'] }}){%- if not loop.last %}, {% endif -%}{% endif -%}
        {%- if "battery" in item.name | lower and ((item.state | int < threshold and item.state|int != 0) or item.state | lower == "low" or item.state | lower == "unknown") -%}
        {{ item.name }} ({{ item.state }}){%- if not loop.last %}, {% endif -%} {% endif -%}
        {%- endfor -%}
        {%- endfor -%}

- platform: template
  sensors:
    vacuum_battery:
      friendly_name: "Vacuum - Battery"
      value_template: "Battery: {{ states.vacuum.rockrobo.attributes.battery_level }}"
      device_class: battery
      unit_of_measurement: '%'

- platform: template
  sensors:
    vacuum_main_brush:
      friendly_name: "Vacuum - Main Brush left"
      value_template: "Main brush: {{ states.vacuum.rockrobo.attributes.main_brush_left }}"
      # device_class: battery
      # unit_of_measurement: '%'
- platform: template
  sensors:
    vacuum_side_brush:
      friendly_name: "Vacuum - Side Brush left"
      value_template: "Side brush: {{ states.vacuum.rockrobo.attributes.side_brush_left }}"
      # device_class: battery
      # unit_of_measurement: '%'
- platform: template
  sensors:
    vacuum_filter:
      friendly_name: "Vacuum - Filter left"
      value_template: "Filter: {{ states.vacuum.rockrobo.attributes.filter_left }}"
      # device_class: battery
      # unit_of_measurement: '%'
- platform: template
  sensors:
    vacuum_sensors:
      friendly_name: "Vacuum - Sensor dirty left"
      value_template: "Sensors: {{ states.vacuum.rockrobo.attributes.sensor_dirty_left }}"
      # device_class: battery
      # unit_of_measurement: '%'

# - platform: template
#   sensors:
#     bedroom_battery_level:
#       friendly_name: "Bedroom room batteries"
#       # entity_id: sensor.bedroom_temperature
#       unit_of_measurement: "%"
#       value_template: "{{states.sensor.bedroom_temperature.attributes.battery_level}}"
#       icon_template: '{% if states.binary_sensor.bedroom_temperature.attributes.battery_level == 100 %}
#                           mdi:battery
#                       {% elif states.binary_sensor.bedroom_temperature.attributes.battery_level >= 90 %}
#                           mdi:battery-90
#                       {% elif states.binary_sensor.bedroom_temperature.attributes.battery_level >= 80 %}
#                           mdi:battery-80
#                       {% elif states.binary_sensor.bedroom_temperature.attributes.battery_level >= 70 %}
#                           mdi:battery-70
#                       {% elif states.binary_sensor.bedroom_temperature.attributes.battery_level >= 60 %}
#                           mdi:battery-60
#                       {% elif states.binary_sensor.bedroom_temperature.attributes.battery_level >= 50 %}
#                           mdi:battery-50
#                       {% elif states.binary_sensor.bedroom_temperature.attributes.battery_level >= 40 %}
#                           mdi:battery-40
#                       {% elif states.binary_sensor.bedroom_temperature.attributes.battery_level >= 30 %}
#                           mdi:battery-30
#                       {% elif states.binary_sensor.bedroom_temperature.attributes.battery_level >= 20 %}
#                           mdi:battery-20
#                       {% elif states.binary_sensor.bedroom_temperature.attributes.battery_level >= 10 %}
#                           mdi:battery-10
#                       {% else %}
#                           mdi:battery-charging-wireless-outline
#                       {% endif %}'