- alias: Vacuum end cleaning finished
  trigger:
  - platform: template
    value_template: "{% if is_state('vacuum.rockrobo', 'docked') or is_state('vacuum.rockrobo', 'returning') %}true{% endif %}"
    # to: 'docked' # cleaning, returning, idle, blocked, error, docked
  action:
  - service: notify.push_to_chrome
    data_template:
      message: >
        Vacuum has stoped and now is {{ trigger.to_state.state }}
      title: Vacuum stopt working template
  - service: notify.pushbullet
    data_template:
      message: >
        Vacuum has stoped and now is {{ trigger.to_state.state }}
      title: Vacuum stopt working template

- alias: Vacuum end cleaning finisheda and docked
  trigger:
  - platform: state
    entity_id: vacuum.rockrobo
    # from: 'docked'
    to: 'docked' # cleaning, returning, idle, blocked, error, docked
  action:
  - service: notify.push_to_chrome
    data_template:
      message: >
        Vacuum has stoped and now is {{ trigger.to_state.state }}
      title: Vacuum stopt working
  - service: notify.pushbullet
    data_template:
      message: >
        Vacuum has stoped and now is {{ trigger.to_state.state }}
      title: Vacuum finished working

- alias: Vacuum have encounter problem
  trigger:
  - platform: state
    entity_id: vacuum.rockrobo
    # from: 'docked'
    to: 'error' # cleaning, returning, idle, blocked, error, docked
  action:
  - service: notify.push_to_chrome
    data_template:
      message: >
        Vacuum has encounter {{ trigger.to_state.state }} and stoped
      title: Vacuum encounter problem
  - service: notify.pushbullet
    data_template:
      message: >
        Vacuum has encounter {{ trigger.to_state.state }} and stoped
      title: Vacuum encounter problem

- alias: Vacuum start cleaning
  trigger:
  - platform: state
  #   value_template: "{% if is_state('vacuum.rockrobo.status', 'cleaning') %}true{% endif %}"
    entity_id: vacuum.rockrobo
    from: 'docked'
    to: 'cleaning' # cleaning, returning, idle, blocked, error, docked
  action:
  - service: notify.push_to_chrome
    data_template:
      message: >
        Vacuum has started and now is {{ trigger.to_state.state }}
      title: Vacuum start working
  - service: notify.pushbullet
    data_template:
      message: >
        Vacuum has started and now is {{ trigger.to_state.state }}
      title: Vacuum start working

- alias: Weekday Vacuum
  trigger:
  - platform: time
    at: '15:00:00'
  condition:
    condition: and
    conditions:
    - condition: state
      entity_id: binary_sensor.workday_sensor
      state: 'on'
    - condition: state
      entity_id: group.all_devices
      state: 'not_home'
    - condition: state
      entity_id: input_select.home_preset
      state: "Empty"
    - condition: state
      entity_id: input_boolean.ready_to_vacuum
      state: "on"
  action:
    service: vacuum.start
    entity_id: vacuum.rockrobo