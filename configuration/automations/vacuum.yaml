# - alias: Vacuum start cleaning
#   id: vacuum_start_cleaning
#   initial_state: 'true'
#   trigger:
#   - platform: state
#   #   value_template: "{% if is_state('vacuum.rockrobo.status', 'cleaning') %}true{% endif %}"
#     entity_id: vacuum.rockrobo
#     from: 'docked'
#     to: 'cleaning' # cleaning, returning, idle, blocked, error, docked
#   action:
#   - service: notify.push_to_chrome
#     data_template:
#       message: >
#         Vacuum has started and now is {{ trigger.to_state.state }} is it intended?
#       title: Vacuum start working
#       data:
#         actions:
#           - action: stop_vacuum
#             icon: "/static/icons/favicon-192x192.png"
#             title: Stop vacuum
#           - action: cancel
#             title: Cancel
#         tag: vacuum-notification
  # - service: notify.pushbullet_nizmo
  #   data_template:
  #     message: >
  #       Vacuum has started and now is {{ trigger.to_state.state }}
  #     title: Vacuum start working

- alias: Vacuum end cleaning finisheda and docked
  id: vacuum_end_cleaning_finisheda_and_docked
  initial_state: 'true'
  trigger:
  - platform: state
    entity_id: vacuum.rockrobo
    from: 'returning'
    to: 'docked' # cleaning, returning, idle, blocked, error, docked
  action:
  - service: notify.push_to_chrome
    data_template:
      message: >
        Vacuum has stoped and now is {{ trigger.to_state.state }}
      title: Vacuum stopt working
      data:
        tag: vacuum-notification
  # - service: notify.pushbullet_nizmo
  #   data_template:
  #     message: >
  #       Vacuum has stoped and now is {{ trigger.to_state.state }}
  #     title: Vacuum finished working

- alias: Vacuum have encounter problem
  id: vacuum_have_encounter_problem
  initial_state: 'true'
  trigger:
  - platform: state
    entity_id: vacuum.rockrobo
    from: 'cleaning'
    to: 'error' # cleaning, returning, idle, blocked, error, docked
  action:
  - service: notify.push_to_chrome
    data_template:
      message: >
        Vacuum has encounter {{ trigger.to_state.state }} and stoped
      title: The vacuum cleaner found a problem
      data:
        tag: vacuum-notification
  # - service: notify.pushbullet_nizmo
  #   data_template:
  #     message: >
  #       Vacuum has encounter {{ trigger.to_state.state }} and stoped
  #     title: The vacuum cleaner found a problem

# - alias: Weekday Vacuum
#   id: weekday_vacuum
#   initial_state: 'true'
#   trigger:
#   - platform: time
#     at: '15:00:00'
#   condition:
#     condition: and
#     conditions:
#     # - condition: state
#     #   entity_id: binary_sensor.workday_sensor
#     #   state: 'on'
#     - condition: state
#       entity_id: group.all_devices
#       state: 'not_home'
#     - condition: state
#       entity_id: input_select.home_preset
#       state: "Empty"
#     - condition: state
#       entity_id: input_boolean.ready_to_vacuum
#       state: "on"
#   action:
#   - service: vacuum.start
#     entity_id: vacuum.rockrobo
#   - service: input_boolean.turn_off
#     entity_id: input_boolean.ready_to_vacuum

- alias: Vacuum monitoring system for sensors
  id: vacuum_monitoring_system_for_sensors
  initial_state: 'true'
  trigger:
  - platform: template
    value_template: "{% if is_state_attr('vacuum.rockrobo', 'sensor_dirty_left', 5) %}true{% endif %}"
  action:
  - service: calendar.todoist_new_task
    data_template:
      content: "Clean sensors in vacuum rockrobo"
      priority: 2
      due_date_string: 'today'

- alias: Vacuum monitoring system for filters
  id: vacuum_monitoring_system_for_filters
  initial_state: 'true'
  trigger:
  - platform: template
    value_template: "{% if is_state_attr('vacuum.rockrobo', 'filter_left', 10) %}true{% endif %}"
  action:
  - service: calendar.todoist_new_task
    data_template:
      content: "Replace filter in vacuum rockrobo"
      priority: 2
      due_date_string: 'today'

- alias: Vacuum monitoring system for brushes
  id: vacuum_monitoring_system_for_brushes
  initial_state: 'true'
  trigger:
  - platform: template
    value_template: "{% if is_state_attr('vacuum.rockrobo', 'side_brush_left', 10) %}true{% endif %}"
  - platform: template
    value_template: "{% if is_state_attr('vacuum.rockrobo', 'main_brush_left', 10) %}true{% endif %}"
  action:
  - service: calendar.todoist_new_task
    data_template:
      content: "Replace side or main brush in vacuum rockrobo"
      priority: 2
      due_date_string: 'today'